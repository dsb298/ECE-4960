<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Lab 7</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap Icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
        <!-- SimpleLightbox plugin CSS-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Masthead-->
        <header class="lab1-head">
            <div class="container px-4 px-lg-5 h-100">
                <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-8 align-self-end">
                        <h1 class="text-white font-weight-bold">Lab 7</h1>
                        <!-- <hr class="divider" /> -->
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <!-- <p class="text-white-75 mb-5">Start Bootstrap can help you build better websites using the Bootstrap framework! Just download a theme and start customizing, no strings attached!</p> -->
                        <!-- <a class="btn btn-primary btn-xl" href="#portfolio">Labs</a> -->
                    </div>
                </div>
            </div>
        </header>
        <section class="page-section lab1-primary" id="lab1-contents">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8 text-left">
                        <h4 class="text-black mt-0">
                            <div style="text-align: center;">
                                <h2>Lab Description</h2>
                            </div>
                            <br>
                            <h5>
                                The purpose of this lab is to set up a kalman filter for the robot. The reason for the kalman filter is to help the robot compensate for its slow ToF sensors.
                            </h5>
                            <br>
                            <br>
                            <div style="text-align: center;">
                                <h2>Setup</h2>
                            </div>
                            <h5>
                                There is not real setup for this lab other than noting that I will be preforming stunt A, which is driving and a wall, doing a flip, then driving back.
                            </h5>
                            <br>
                            <br>
                            <div style="text-align: center;">
                                <h2>Lab Sections</h2>
                            </div>
                            <br>
                            <h3><u>Part 1: Step Response:</u></h3>
                            <h5>
                                The step response was determined by driving the robot at a wall and measuring its distance to the wall, pwm values, and elapsed time. I was able to tune the PID controller well in lab 6, so the robot drives at the wall at a decent speed without crashing. This can be seen below:
                                <div style="text-align: center;">
                                    <video width="500" height="375" controls>
                                        <source src="../assets/lab7/img/stepvid.mp4" type="video/mp4">
                                    </video>
                                </div>
                                <br>
                                The maximum PWM signal given was 75. I seemed to reach steady state for a short period with this run as well, but it can be a little hard to tell with noise from the front sensor.
                                The graphs below show the ToF readings, velocity, and motor inputs respectively. The velocity graph also includes an orange line to indicate steady state.
                                <div style="text-align: center;">
                                    <img src="../assets/lab7/img/distance_graph.png" alt="output">
                                </div>
                                <div style="text-align: center;">
                                    <img src="../assets/lab7/img/steady_state.png" alt="output">
                                </div>
                                <div style="text-align: center;">
                                    <img src="../assets/lab9/img/pwm_graph.png" alt="output">
                                </div>
                                <br>
                                I found the steady state speed to be 1225 mm/s. 90% of this value is about 1102 mm/s, which takes 1.1 seconds to reach. With this, I was able to compute the A and B matrices by solving for drag and mass. Drag is found by dividing the step, which is taken as 1, by the steady state speed.
                                Mass is then found by multiplying the 90% rise time by the drag, then dividing by the natural log of .1.
                            </h5>

                            <h3><u>Part 2: Kalman Filter setup</u></h3>
                            <h5>
                                To begin the kalman filter, the process noise and sensor noise must be determined. Three separate sigma values must be chosen to determine these. For now, these values have been chosen based off what was chosen in lecture. sigma1=10, sigma2=10, and sigma3=20.
                                The C matrix used is the one provided in the lab handout, C=[-1, 0].
                            </h5>

                            <h3><u>Part 3: Checking Kalman Filter</u></h3>
                            <h5>
                                The filter is checked by running it on data collected from lab 6. However, I no longer have this data, so I ended up collecting new data.
                                With this, I was able to run my kalman filter. The sigma values I used seemed to work well, as can be seen from the graph below.
                                <div style="text-align: center;">
                                    <img src="../assets/lab9/img/kalman.png" alt="output">
                                </div>
                            </h5>
                        </h4>
                        <!-- <a class="btn btn-light btn-xl" href="#services">Get Started!</a> -->
                    </div>
                </div>
            </div>
        </section>
        <!-- Services-->
        <!-- <section class="page-section" id="services">
            <div class="container px-4 px-lg-5">
                <h2 class="text-center mt-0">At Your Service</h2>
                <hr class="divider" />
                <div class="row gx-4 gx-lg-5">
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-gem fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Sturdy Themes</h3>
                            <p class="text-muted mb-0">Our themes are updated regularly to keep them bug free!</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-laptop fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Up to Date</h3>
                            <p class="text-muted mb-0">All dependencies are kept current to keep things fresh.</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-globe fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Ready to Publish</h3>
                            <p class="text-muted mb-0">You can use this design as is, or you can make changes!</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-heart fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Made with Love</h3>
                            <p class="text-muted mb-0">Is it really open source if it's not made with love?</p>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
        <!-- Portfolio-->
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- SimpleLightbox plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>


